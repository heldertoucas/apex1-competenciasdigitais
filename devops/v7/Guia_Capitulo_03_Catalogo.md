# Manual de Implementação - Capítulo 3: Catálogo Formativo
**Aplicação:** Academia Digital  
**Versão do Guia:** 1.0  
**Objetivo:** Estruturar a oferta formativa (Programas, Cursos, Módulos e Competências).

---

## 1. Implementação da Estrutura de Dados (SQL)

Vamos criar a estrutura hierárquica do catálogo.

### 1.1. Criar o Script do Catálogo
1.  Aceda a **SQL Workshop** > **SQL Scripts**.
2.  Clique em **Create**.
3.  **Script Name:** `03_Catalogo`.
4.  Copie e cole o seguinte código SQL:

```sql
-- CAPÍTULO 3: CATÁLOGO FORMATIVO

-- 1. Programas (Ex: Passaporte Digital)
CREATE TABLE Programas (
    ID_Programa NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    Codigo VARCHAR2(50) NOT NULL UNIQUE,
    Nome VARCHAR2(200) NOT NULL,
    Descricao VARCHAR2(4000),
    Ativo CHAR(1) DEFAULT 'S' CHECK (Ativo IN ('S','N'))
);

-- 2. Cursos (Unidades de Formação)
CREATE TABLE Cursos (
    ID_Curso NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    ID_Programa NUMBER,
    Codigo VARCHAR2(50) UNIQUE,
    Nome VARCHAR2(255) NOT NULL,
    Nome_Curso_SIGO VARCHAR2(100),
    Carga_Horaria NUMBER,
    Modalidade VARCHAR2(50),
    Forma_Organizacao VARCHAR2(50),
    Publico_Alvo VARCHAR2(4000),
    
    -- Conteúdos Ricos (CLOB)
    Objetivos_Gerais CLOB,
    Objetivos_Especificos CLOB,
    Conteudos_Programaticos CLOB,
    Metodologia_Avaliacao CLOB,
    Metodologia_Formacao CLOB, -- [Novo v7]
    Recursos_Didaticos CLOB,   -- [Novo v7]
    URL_Manual_Digital VARCHAR2(500),
    
    ID_Estado_Curso NUMBER, -- FK
    FOREIGN KEY (ID_Programa) REFERENCES Programas(ID_Programa),
    FOREIGN KEY (ID_Estado_Curso) REFERENCES Tipos_Estado_Curso(ID_Estado_Curso)
);

-- 3. Módulos (Hierarquia dentro do Curso)
CREATE TABLE Modulos (
    ID_Modulo NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    ID_Curso NUMBER NOT NULL,
    Nome VARCHAR2(255) NOT NULL,
    Ordem NUMBER,
    Carga_Horaria NUMBER,
    Tipo_Avaliacao VARCHAR2(20) CHECK (Tipo_Avaliacao IN ('QUANTITATIVA', 'QUALITATIVA', 'NENHUMA')),
    FOREIGN KEY (ID_Curso) REFERENCES Cursos(ID_Curso) ON DELETE CASCADE
);

-- 4. Competências (Referencial DigComp)
CREATE TABLE Competencias (
    ID_Competencia NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    ID_Modulo NUMBER, -- Associação opcional direta a módulo
    Nome VARCHAR2(255) NOT NULL,
    Descricao VARCHAR2(4000),
    ID_Area_Competencia NUMBER,
    ID_Nivel_Proficiencia NUMBER,
    URL_Medalha_Digital VARCHAR2(500),
    URL_Icone_Badge VARCHAR2(500),
    URL_Claim_Badge VARCHAR2(500),
    FOREIGN KEY (ID_Modulo) REFERENCES Modulos(ID_Modulo) ON DELETE SET NULL,
    FOREIGN KEY (ID_Area_Competencia) REFERENCES Tipos_Area_Competencia(ID_Area_Competencia),
    FOREIGN KEY (ID_Nivel_Proficiencia) REFERENCES Tipos_Nivel_Proficiencia(ID_Nivel_Proficiencia)
);
```

5.  **Executar:** Clique **Run** > **Run Now**.

---

## 2. Interface de Gestão do Catálogo

Vamos criar uma interface rica para gerir os cursos e os seus conteúdos pedagógicos.

### 2.1. Gestão de Programas (Simples)
1.  **Create Page** > **Report**.
2.  **Interactive Report**.
3.  **Page Name:** `Lista de Programas`.
4.  **Include Form Page:** Marque esta opção.
5.  **Form Page Name:** `Editar Programa`.
6.  **Table:** `PROGRAMAS`.
7.  **Criar.**

### 2.2. Gestão de Cursos (Backoffice Central)
1.  **Create Page** > **Master-Detail** > **Stacked** (Empilhado).
2.  **Master Source:** Tabela `CURSOS`. Primary Key `ID_CURSO`.
3.  **Detail Source:** Tabela `MODULOS`. Select FK `ID_CURSO`.
4.  **Page Name:** `Catálogo de Cursos`.
5.  **Criar.**

### 2.3. Configurar o Editor de Curso (Campos Ricos)
O formulário de cursos gerado é muito longo. Vamos melhorá-lo.
1.  Abra o **Page Designer** da página "Catálogo de Cursos" (a página "Master" gerada).
2.  Localize os itens `P_METODOLOGIA_FORMACAO`, `P_RECURSOS_DIDATICOS`, `P_CONTEUDOS_PROGRAMATICOS`.
3.  Para cada um, altere o **Type** para `Rich Text Editor`.
    *   Isto permitirá ao coordenador formatar texto com bullets, negrito, etc.
4.  Organize os campos em Abas (Tabs) para não ficar um "linguiçāo":
    *   Crie uma região **Tabs Container**.
    *   Arraste sub-regiões para dentro: "Dados Gerais", "Pedagogia", "Conteúdos", "Ligações SIGO".
    *   Arraste os campos respetivos para cada aba.

### 2.4. Associação de Competências
Para associar competências aos módulos:
1.  Na região (IG) dos **Módulos**, adicione um botão ou link para uma nova página modal de "Gerir Competências".
2.  *Alternativa simples:* Criar uma página Master-Detail separada para `MODULOS` -> `COMPETENCIAS`, acedida via link na lista de módulos.

---
**Conclusão Capítulo 3:**
O esqueleto da oferta formativa está criado. Pode agora inserir o seu primeiro Curso de teste (ex: "Literacia Digital Básica").
